{% extends "form_generico.html"%}
{% load static %}
{% load widget_tweaks %}
{% block form %}


    <!-- id_repuesto con modal -->
    <div class="form-group mb-3">
        <label for="{{ form.id_repuesto.id_for_label }}">Repuesto:</label>
        <div class="input-group">
            {{ form.id_repuesto }}
            <div class="input-group-append">
                <button type="button" class="btn btn-secondary" data-toggle="modal" data-target="#modal-id_repuesto">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </div>
    </div>

     <div class="modal fade" id="modal-id_repuesto" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Crear Repuesto</h5>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Aquí se cargará el form por AJAX -->
            </div>
            </div>
        </div>
    </div>

        <script>
        $("#modal-id_repuesto").on("show.bs.modal", function(){
            var modal = $(this);
            $.ajax({
                url: "{% url 'apy:detallerepuesto_modal_crear' %}",
                success: function(data){
                    modal.find(".modal-body").html(data.html || data);
                }
            });
        });
    </script>


{% endblock %}