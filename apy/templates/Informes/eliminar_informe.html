{% extends 'eliminar_generic.html' %}

{% block eliminar %}
                <h5><i class="icon fas fa-ban"></i> Advertencia¡</h5>
                Deseas eliminar el informe #{{object.id_informe}}?
{% endblock %}

{% block validar %}
            <button type="submit" class="btn btn-success swalDefauldtSuccess">
                <i class="fas fa-save"></i> Si, Aceptar
            </button>
            <a href="{{ listar_url }}" class="btn btn-info btn-flat">
                <i class="fas fa-times"></i> Cancelar
            </a>
{% endblock %}

{% block extra_js %}
    {{ block.super }}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const btnEliminar = document.getElementById('btn-confirmar-eliminar');
            
            if (btnEliminar) {
                btnEliminar.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    Swal.fire({
                        title: '¿Estás seguro?',
                        text: "¿Deseas eliminar el informe #{{ object.pk }}? Esta acción no se puede deshacer.",
                        icon: 'warning',
                        showCancelButton: true,
                        confirmButtonColor: '#d33',
                        cancelButtonColor: '#6c757d',
                        confirmButtonText: '<i class="fas fa-trash"></i> Sí, eliminar',
                        cancelButtonText: '<i class="fas fa-times"></i> Cancelar',
                        reverseButtons: true,
                        focusCancel: true
                    }).then((result) => {
                        if (result.isConfirmed) {
                            // Mostrar loading
                            Swal.fire({
                                title: 'Eliminando...',
                                text: 'Por favor espera',
                                allowOutsideClick: false,
                                showConfirmButton: false,
                                willOpen: () => {
                                    Swal.showLoading();
                                }
                            });
                            
                            // Enviar el formulario
                            document.querySelector('form').submit();
                        }
                    });
                });
            }
        });
    </script>
{% endblock %}